---
name: hazelcast-enterprise-for-pcf
label: Hazelcast Enterprise for PCF
description: Hazelcast Enterprise for PCF
icon_image: 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
product_version: '1.0.1'
metadata_version: '1.5'
minimum_version_for_upgrade: '0.0.1'
rank: 1
serial: true

releases:
- file: hazelcast-enterprise-for-pcf-1.0.1.tgz
  name: hazelcast-enterprise-for-pcf
  version: '1.0.1'

stemcell_criteria:
  os: ubuntu-trusty
  requires_cpi: false
  version: '3146.5'

property_blueprints:
#
# Parameters for the entire product
#
- name: org
  type: string
  configurable: true
  default: hazelcast-org
- name: org_quota
  type: integer
  configurable: true
  constraints:
    min: 512
    max: 4096
  default: 4096
- name: space
  type: string
  configurable: true
  default: hazelcast-space
- name: apply_open_security_group
  type: boolean
  configurable: true
  default: False
- name: allow_paid_service_plans
  type: boolean
  configurable: true
  default: False
#
# Standard properties for package hazelcast_enterprise_service_broker_app
#
- name: hazelcast_enterprise_service_broker_app_enable_global_access_to_plans
  type: boolean
  configurable: true
  default: True
#
# Custom properties from the tile.yml file
#
- name: management_center_url # Refer to this elsewhere as (( .properties.management_center_url ))
  type: string
  default: http://hazelcast-mancenter.apps.bigfastexperts.com/mancenter
  configurable: true
  optional: false
- name: license_key # Refer to this elsewhere as (( .properties.license_key ))
  type: string
  default: YOUR_HAZELCAST_ENTERPRISE_LICENSE_KEY
  configurable: true
  optional: false

form_types:
#
# Custom form mancenter_properties from the tile.yml file
#
- name: mancenter_properties
  label: Management Center Properties
  description: mancenter_properties
  property_inputs:
  - reference: .properties.management_center_url
    label: Management Center URL
    description: Management Center URL
#
# Custom form license_key from the tile.yml file
#
- name: license_key
  label: License Key
  description: License Key for Hazelcast Enterprise
  property_inputs:
  - reference: .properties.license_key
    label: License Key
    description: License Key for Hazelcast Enterprise
#
# Service access form
#
- name: service_access
  label: Service Access
  description: Determine availability of services
  property_inputs:
  - reference: .properties.hazelcast_enterprise_service_broker_app_enable_global_access_to_plans
    label: Enable global access to plans of service hazelcast_enterprise_service_broker_app
    description: "Enable global access to plans in the marketplace"

job_types:
#
# Default compilation job
#
- name: compilation
  resource_label: compilation
  resource_definitions:
   - name: ram
     type: integer
     configurable: true
     default: 4096
   - name: ephemeral_disk
     type: integer
     configurable: true
     default: 10240
   - name: persistent_disk
     type: integer
     configurable: true
     default: 0
   - name: cpu
     type: integer
     configurable: true
     default: 2
  static_ip: 0
  dynamic_ip: 1
  max_in_flight: 1
  single_az_only: true
  instance_definitions:
  - name: instances
    type: integer
    configurable: true
    default: 1
#
# deploy-all job
#
- name: deploy-all
  resource_label: deploy-all
  errand: true
  templates:
  - name: deploy-all
    release: hazelcast-enterprise-for-pcf
  resource_definitions:
  - name: ram
    type: integer
    configurable: false
    default: 1024
  - name: ephemeral_disk
    type: integer
    configurable: false
    default: 4096
  - name: persistent_disk
    type: integer
    configurable: false
    default: 0
  - name: cpu
    type: integer
    configurable: false
    default: 1
  static_ip: 0
  dynamic_ip: 1
  max_in_flight: 1
  single_az_only: false
  instance_definitions:
  - name: instances
    type: integer
    configurable: false
    default: 1
  property_blueprints:
  - name: vm_credentials
    type: salted_credentials
    default:
      identity: vcap
  - name: app_credentials
    type: salted_credentials
  manifest: |
    domain: (( ..cf.cloud_controller.system_domain.value ))
    app_domains:
    - (( ..cf.cloud_controller.apps_domain.value ))
    org: (( .properties.org.value ))
    space: (( .properties.space.value ))
    ssl:
      skip_cert_verify: (( ..cf.ha_proxy.skip_cert_verify.value ))
    cf:
      admin_user: (( ..cf.uaa.system_services_credentials.identity ))
      admin_password: (( ..cf.uaa.system_services_credentials.password ))
    org_quota: (( .properties.org_quota.value ))
    apply_open_security_group: (( .properties.apply_open_security_group.value ))
    allow_paid_service_plans: (( .properties.allow_paid_service_plans.value ))
    security:
      user: (( .deploy-all.app_credentials.identity ))
      password: (( .deploy-all.app_credentials.password ))
    management_center_url: (( .properties.management_center_url.value ))
    license_key: (( .properties.license_key.value ))
    hazelcast_enterprise_service_broker_app:
      name: hazelcast_enterprise_service_broker_app
      user: (( .deploy-all.app_credentials.identity ))
      password: (( .deploy-all.app_credentials.password ))
      enable_global_access_to_plans: (( .properties.hazelcast_enterprise_service_broker_app_enable_global_access_to_plans.value ))
#
# delete-all job
#
- name: delete-all
  resource_label: delete-all
  errand: true
  templates:
  - name: delete-all
    release: hazelcast-enterprise-for-pcf
  resource_definitions:
  - name: ram
    type: integer
    configurable: false
    default: 1024
  - name: ephemeral_disk
    type: integer
    configurable: false
    default: 4096
  - name: persistent_disk
    type: integer
    configurable: false
    default: 0
  - name: cpu
    type: integer
    configurable: false
    default: 1
  static_ip: 0
  dynamic_ip: 1
  max_in_flight: 1
  single_az_only: false
  instance_definitions:
  - name: instances
    type: integer
    configurable: false
    default: 1
  property_blueprints:
  - name: vm_credentials
    type: salted_credentials
    default:
      identity: vcap
  - name: app_credentials
    type: salted_credentials
  manifest: |
    domain: (( ..cf.cloud_controller.system_domain.value ))
    app_domains:
    - (( ..cf.cloud_controller.apps_domain.value ))
    org: (( .properties.org.value ))
    space: (( .properties.space.value ))
    ssl:
      skip_cert_verify: (( ..cf.ha_proxy.skip_cert_verify.value ))
    cf:
      admin_user: (( ..cf.uaa.system_services_credentials.identity ))
      admin_password: (( ..cf.uaa.system_services_credentials.password ))

post_deploy_errands:
- name: deploy-all

pre_delete_errands:
- name: delete-all

update:
  canaries: 1
  canary_watch_time: 10000-100000
  max_in_flight: 1
  update_watch_time: 10000-100000

requires_product_versions:
- name: cf
  version: '~> 1.5'

provides_product_versions:
- name: hazelcast-enterprise-for-pcf
  version: '1.0.1'